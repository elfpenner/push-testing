<!DOCTYPE HTML>
<style>
body { margin:0px; background-color: white; font-family: 'Roboto'; font-size:16px; height:100%;}
#container {margin-left:3%; margin-right:3%; margin-top:4%; height:100%;} 
#title { color: #ffffff;
    margin-top:0px; padding:3%; margin-bottom:1%;
    font-size: 1.5em; font-weight:600;
    background-color:#2196F3; } 
input, textarea { line-height: 1.5em;
    font-size:1em;
    color:#333;
    margin-top:0.5em;
    margin-bottom:1em;
    width:100%;
    border: none;
    border-bottom:1px solid #2196F3;} 
textarea {font-family: "Roboto"; font-size:16px; height:50vh;
}   
#bottom {position: absolute; bottom:2px;}
#red {background-color:#F44336; color:#ffffff;}
#yellow {background-color:#FFEB3B;}
#green {background-color:#4CAF50; color:#ffffff;}
#grey {background-color:#9E9E9E; color:#ffffff;}

.button {margin: 0 auto; width:100%; background-color:#2196F3; padding:2%; height:2em; 
    box-shadow: 2px 3px 3px 0 rgba(0, 0, 0, 0.3); border-bottom: 0px; margin-bottom: 4%; margin-right:2%;   
    
}    
    
#gps {display: none;}
</style>               
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">        
<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>        
<script src="cordova.js"></script>
    <script type="text/javascript" charset="utf-8">
    // Wait for Cordova to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);
    // Cordova is ready
    //
    function onDeviceReady() {

        
    }
    </script>

<script type="text/javascript">
        var watchID;
        var geoLoc;                                                   
        
        function showLocation(position) {
                var latitude = position.coords.latitude;
                var longitude = position.coords.longitude;
                get_add(latitude, longitude);
        }
        
        function errorHandler(err) {
          if(err.code == 1) {
            alert("Error: Access is denied!");
          }else if( err.code == 2) {
            alert("Error: Position is unavailable!");
          }
        }

        function getLoc(){
           if(navigator.geolocation){
              // timeout at 60000 milliseconds (60 seconds)
              var options = {enableHighAccuracy:true,maximumAge:30000,timeout:27000};
              geoLoc = navigator.geolocation;

              //watchID = geoLoc.watchPosition(showLocation, errorHandler, options);
              watchID = geoLoc.getCurrentPosition(showLocation, errorHandler, options);
                            
           }else{
              alert("Sorry, browser does not support geolocation!");
           }
        }

        function get_add(latitude, longitude){
                $.get("http://maps.google.com/maps/api/geocode/xml?latlng=" + latitude + "," + longitude + "&sensor=false", function(data){
                        $(data).find("formatted_address").each(function(){
                                var unitData = $(this).text();
                                $('input[name=gps]').fadeOut();
                                $('input[name=gps]').val(unitData);
                                $('input[name=gps]').fadeIn();
                                return false;
                        });                  
                });
        }
    function postToGoogle(){
        $('#submit').fadeOut();
    
        var region = $('#region').val();
        var address = $('#address').val();
        var comment = $('#comment').val();
        if ( (region !== "") && (address !== "") ) {
            jQuery.ajax({
                url: "https://docs.google.com/forms/d/184WwDtA8IdHr7lYv0Zu5YSHe9Gi0pTrW7AFos5Y5FEA/formResponse",
                data: {"entry.1109139907" : region, "entry.2116315127" : address, "entry.2096089748": comment},
                type: "POST",
                dataType: "xml",
                statusCode: {
                    0: function (){
                        //Success message
                        $('#comment').val("");
                        $('#submit').fadeIn('slow');
                        $("#address" ).focus();                        
                    },
                    200: function (){
                        //Success message
                        $('#comment').val("");
                        $('#submit').fadeIn('slow');
                        $("#address" ).focus();                        
                        
                    }
                }
            });
        }
        else {
            //Error message
        }
    }
//getLoc();
//var i = setInterval(getLoc, 30000);
//$("#address" ).focusin(getLoc());

//$( "#address" ).focusin(function() {
//  getLoc();
//});

$(document).ready(function() {

/*
navigator.notification.alert(
    'You are the winner!',  // message
    alertDismissed,         // callback
    'Game Over',            // title
    'Done'                  // buttonName
);
*/        


    getLoc();
    
  $("#address").focus(function() {
    getLoc();
    
  });

});

</script>

</head>
<html>
  <body>
    <div id="title">
<svg id="Capa_1" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 430.114 430.114" style="enable-background:new 0 0 430.114 430.114;" xml:space="preserve">
<g>
 <path d="M356.208,107.051c-1.531-5.738-4.64-11.852-6.94-17.205C321.746,23.704,261.611,0,213.055,0   C148.054,0,76.463,43.586,66.905,133.427v18.355c0,0.766,0.264,7.647,0.639,11.089c5.358,42.816,39.143,88.32,64.375,131.136   c27.146,45.873,55.314,90.999,83.221,136.106c17.208-29.436,34.354-59.259,51.17-87.933c4.583-8.415,9.903-16.825,14.491-24.857   c3.058-5.348,8.9-10.696,11.569-15.672c27.145-49.699,70.838-99.782,70.838-149.104v-20.262   C363.209,126.938,356.581,108.204,356.208,107.051z M214.245,199.193c-19.107,0-40.021-9.554-50.344-35.939   c-1.538-4.2-1.414-12.617-1.414-13.388v-11.852c0-33.636,28.56-48.932,53.406-48.932c30.588,0,54.245,24.472,54.245,55.06   C270.138,174.729,244.833,199.193,214.245,199.193z" fill="#ffffff"/>
</g>
</svg>

POP Tracking</div>  
    <div id=container>    
      <form id="callus" target="_self" onsubmit="" action="javascript: postToGoogle()">   
        <input id="region" type="text" name="region" placeholder="Area">   
        <input id="address" type="text" name="address" placeholder="Street name and house number">   
        <input id="gps" type="text" name="gps" disabled="true">   
<textarea id="comment" name="comment" style="width:100%; height:4.5em; font-size:1.1em;" placeholder="Notes"></textarea>     
       <div id="bottom"></div>
        <input id="red" class="button" type="submit" value="Not interested"/>   
        <input id="yellow" class="button" type="submit" value="Wants to know more"/> 
        <input id="green" class="button" type="submit" value="Turned & believed"/> 
        <input id="grey" class="button" type="submit" value="Trained"/>
        <a id="green" href="https://www.deville-internet.nl/demo/gps.html" class="button">Naar GPS</a>
        </div>
      </form>    
      <div id="output">
      </div>
    </div>         
  </body>
</html>
